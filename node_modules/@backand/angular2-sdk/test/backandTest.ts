/// <reference types="node" />
/// <reference types="mocha" />
/// <reference types="chai" />

global['XMLHttpRequest'] = require("xmlhttprequest").XMLHttpRequest;
import 'reflect-metadata';
require('zone.js/dist/zone');
require('zone.js/dist/long-stack-trace-zone');
require('zone.js/dist/proxy');
require('zone.js/dist/sync-test');
require('zone.js/dist/async-test');
require('zone.js/dist/fake-async-test');
import { TestBed, inject } from '@angular/core/testing';
import { BrowserDynamicTestingModule, platformBrowserDynamicTesting } from '@angular/platform-browser-dynamic/testing';
TestBed.initTestEnvironment(BrowserDynamicTestingModule, platformBrowserDynamicTesting());
var chai = require('chai')
var expect = chai.expect;

import { BackandService } from '../src/backand.service'
var lastCreatedId = null;

describe('Backand SDK', () => {

  let backand: BackandService;
  beforeEach(() => {
    TestBed.configureTestingModule({
      providers: [ BackandService ]
    });
  });
  beforeEach(inject([BackandService], (_backand: BackandService) => {
    backand = _backand;
  }));

  it('should initiate backand namespace', () => {
    expect(backand.init).to.be.an('function');
    backand.init({
      appName: 'sdk',
      signUpToken: '851692ae-eb94-4f18-87ee-075255e67748',
      anonymousToken: '82cfcfe8-c718-4621-8bb6-cd600e23487f',
      runSocket: true
    });
    expect(backand).to.be.an('object');
  });

  it('get', () => {
    this.timeout(0);
    return backand.query.get('getItemsCount');
  });

});
